{"version":3,"file":"editor.js","mappings":"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","sources":["webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/native.js","webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/regex.js","webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/rng.js","webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/stringify.js","webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/v4.js","webpack://Poeticsoft Content Payment Plugin/./node_modules/uuid/dist/validate.js","webpack://Poeticsoft Content Payment Plugin/./src/block/ctacampus/editor.scss?6007","webpack://Poeticsoft Content Payment Plugin/./src/block/ctacampus/pageselector.js","webpack://Poeticsoft Content Payment Plugin/webpack/bootstrap","webpack://Poeticsoft Content Payment Plugin/webpack/runtime/define property getters","webpack://Poeticsoft Content Payment Plugin/webpack/runtime/hasOwnProperty shorthand","webpack://Poeticsoft Content Payment Plugin/webpack/runtime/make namespace object","webpack://Poeticsoft Content Payment Plugin/./src/block/ctacampus/editor.js"],"sourcesContent":["const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default { randomUUID };\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","let getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n    if (!getRandomValues) {\n        if (typeof crypto === 'undefined' || !crypto.getRandomValues) {\n            throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n        }\n        getRandomValues = crypto.getRandomValues.bind(crypto);\n    }\n    return getRandomValues(rnds8);\n}\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction _v4(options, buf, offset) {\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    return _v4(options, buf, offset);\n}\nexport default v4;\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","// extracted by mini-css-extract-plugin\nexport {};","const {\r\n  useMemo\r\n} = wp.element\r\nconst {\r\n  SelectControl \r\n} = wp.components\r\n    \r\nconst buildHierarchy = (\r\n  pagesList, \r\n  parent = 0, \r\n  level = 0\r\n) => {\r\n\r\n  const children = pagesList\r\n  .filter(p => p.parent === parent)\r\n\r\n  return children\r\n  .flatMap(page => {\r\n\r\n    const prefix = '—'.repeat(level)\r\n    const label = `${prefix} ${ page.title || '(Sin título)'}`\r\n\r\n    return [\r\n      { label, value: page.id },\r\n      ...buildHierarchy(pagesList, page.id, level + 1),\r\n    ]\r\n  })\r\n}\r\n\r\nexport const PageSelector = ({\r\n  attributes, \r\n  setAttributes,\r\n  pagesList\r\n}) => { \r\n\r\n  const {  \r\n    targetId\r\n  } = attributes\r\n\r\n  const options = useMemo(\r\n    () => {\r\n\r\n      if (!pagesList) return [{ \r\n        label: 'Cargando páginas...', \r\n        value: null\r\n      }]\r\n\r\n      return [\r\n        { \r\n          label: 'Selecciona target', \r\n          value: null \r\n        },\r\n        ...buildHierarchy(pagesList),\r\n      ]\r\n\r\n    }, \r\n    [ pagesList ]\r\n  )\r\n\r\n  return (\r\n    <SelectControl\r\n      className=\"SelectorPage\"\r\n      label=\"Seleccionar Página\"\r\n      value={ targetId }\r\n      options={ options }\r\n      onChange={\r\n        value => setAttributes({\r\n          targetId: parseInt(value)\r\n        })\r\n      }\r\n    />\r\n  )\r\n}\r\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './editor.scss'\r\n\r\nimport { v4 as uuidv4 } from 'uuid'\r\nconst { \r\n  registerBlockType\r\n} = wp.blocks\r\nconst { \r\n  useBlockProps,\r\n  InspectorControls,\r\n  RichText  \r\n} = wp.blockEditor\r\nconst {\r\n  useState,\r\n  useEffect\r\n} = wp.element\r\nconst {\r\n  PanelBody,\r\n  __experimentalNumberControl,\r\n  TextControl,\r\n  Button, \r\n  Modal\r\n} = wp.components\r\nconst { \r\n  useSelect \r\n} = wp.data\r\nconst {\r\n  apiFetch\r\n} = wp\r\n\r\nimport { \r\n  PageSelector\r\n} from './pageselector';\r\n\r\nimport metadata from 'blocks/ctacampus/block.json'\r\nimport './editor.scss'\r\n    \r\nconst buildPageTree = (\r\n  pagesList, \r\n  parent=0\r\n) => {\r\n\r\n  return pagesList\r\n  .filter(p => p.parent == parent)\r\n  .map(p => ({\r\n    title: p.title.rendered,\r\n    children: buildPageTree(pagesList, p.id)\r\n  }))\r\n}\r\n\r\nconst Edit = props => {\r\n  \r\n  const {\r\n    attributes, \r\n    setAttributes,\r\n    clientId\r\n  } = props  \r\n  const { \r\n    blockId,\r\n    refClientId,\r\n    targetId,\r\n    buttonText,\r\n    targetText,\r\n    discount\r\n  } = attributes  \r\n  const blockProps = useBlockProps()\r\n  const [ pagesList, setPagesList ] = useState(null)\r\n  const [ editingContents, setEditingContents ] = useState(false)\r\n\r\n  useEffect(() => {\r\n\r\n    apiFetch({ path: '/poeticsoft/contentpayment/campus/pages' })\r\n    .then(setPagesList)\r\n\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n\r\n    if (!blockId) {\r\n\r\n      setAttributes({ \r\n        blockId: uuidv4(),\r\n        refClientId: clientId\r\n      })\r\n\r\n    } else {\r\n\r\n      if (refClientId !== clientId) {\r\n\r\n        setAttributes({ \r\n          blockId: uuidv4(),\r\n          refClientId: clientId\r\n        })\r\n      }\r\n    }\r\n\r\n  }, [clientId])\r\n   \r\n  return <>\r\n    <InspectorControls>\r\n      <PanelBody \r\n        className=\"CTACampus\"\r\n        title={ 'Opciones del Bloque' } \r\n        initialOpen={ true }\r\n      >\r\n        <div className=\"Controls\">\r\n          <PageSelector\r\n            attributes={  attributes }\r\n            setAttributes={ setAttributes }\r\n            pagesList={ pagesList }\r\n          />\r\n          <__experimentalNumberControl\r\n            className=\"Discount\"\r\n            label=\"Descuento\"\r\n            isShiftStepEnabled={ true }\r\n            shiftStep={ 1 }\r\n            value={ discount }\r\n            onChange={ \r\n              value => setAttributes({\r\n                discount: value\r\n              })\r\n            }\r\n          />\r\n          <Button\r\n            className=\"Contents\"\r\n            variant=\"primary\"\r\n            onClick={ () => setEditingContents(true) }\r\n          >\r\n            Text Contents\r\n          </Button>\r\n        </div>\r\n      </PanelBody>\r\n    </InspectorControls>\r\n    <div { ...blockProps }>\r\n      {\r\n        targetId && pagesList ?\r\n        <div className=\"\r\n          block-editor-block-list__block \r\n          wp-block wp-block-buttons \r\n          block-editor-block-list__layout \r\n          is-layout-flex wp-block-buttons-is-layout-flex\r\n          \"\r\n        >\r\n          <div \r\n            className=\"\r\n              block-editor-block-list__block wp-block \r\n              wp-block-button\r\n            \"\r\n          >\r\n            <div \r\n              className=\"\r\n                block-editor-rich-text__editable \r\n                wp-block-button__link \r\n                wp-element-button \r\n                rich-text\r\n              \"\r\n            >\r\n              {\r\n                buttonText\r\n                ||\r\n                pagesList.find(p => p.id == targetId).title\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n        :\r\n        <div className=\"NoTree\">\r\n          { `${ buttonText || 'Selecciona Página en Campus' }` }\r\n        </div>\r\n      }\r\n      {        \r\n        editingContents &&\r\n        <Modal \r\n          title=\"CTA Content\" \r\n          className=\"CTAEditTexts\"\r\n          onRequestClose={ () => setEditingContents(false) }\r\n        >\r\n          <TextControl\r\n            label=\"Texto botón\"\r\n            value={ buttonText }\r\n            onChange={ \r\n              value => setAttributes({\r\n                buttonText: value\r\n              })\r\n            }\r\n            placeholder=\"Call to action\"\r\n          />\r\n          <div className=\"EditContentLabel\">Texto target</div>\r\n          <RichText\r\n            className=\"EditContent\"\r\n            tagName=\"div\"\r\n            value={ targetText }\r\n            allowedFormats={[ \r\n              'core/bold', \r\n              'core/italic' \r\n            ]}\r\n            onChange={ \r\n              value => setAttributes({ \r\n                targetText: value \r\n              }) \r\n            }\r\n            placeholder=\"Condiciones\"\r\n          />\r\n        </Modal>\r\n      }\r\n    </div>\r\n  </>\r\n}\r\n\r\nconst Save = () => null\r\n\r\nregisterBlockType(\r\n  metadata.name,\r\n  {\r\n    edit: Edit,\r\n    save: Save\r\n  }\r\n)"],"names":["useMemo","wp","element","SelectControl","components","buildHierarchy","pagesList","parent","arguments","length","undefined","level","children","filter","p","flatMap","page","prefix","repeat","label","concat","title","value","id","_toConsumableArray","PageSelector","_ref","attributes","setAttributes","targetId","options","React","createElement","className","onChange","parseInt","v4","uuidv4","registerBlockType","blocks","_wp$blockEditor","blockEditor","useBlockProps","InspectorControls","RichText","_wp$element","useState","useEffect","_wp$components","PanelBody","__experimentalNumberControl","TextControl","Button","Modal","useSelect","data","_wp","apiFetch","metadata","buildPageTree","map","rendered","Edit","props","clientId","blockId","refClientId","buttonText","targetText","discount","blockProps","_useState","_useState2","_slicedToArray","setPagesList","_useState3","_useState4","editingContents","setEditingContents","path","then","Fragment","initialOpen","isShiftStepEnabled","shiftStep","variant","onClick","find","onRequestClose","placeholder","tagName","allowedFormats","Save","name","edit","save"],"sourceRoot":""}